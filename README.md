# panoTest

Веб-приложение для интерактивного управления изображением на экране с помощью отслеживания положения головы через веб-камеру.

## Описание

panoTest - это прототип инновационного интерфейса, который позволяет управлять панорамированием и масштабированием изображения на экране без использования мыши и клавиатуры. Вместо этого используется отслеживание положения головы пользователя относительно веб-камеры через MediaPipe.

### Как это работает

1. **Отслеживание головы**: MediaPipe Face Landmarker отслеживает положение головы пользователя в реальном времени (translation X/Y/Z относительно камеры)

2. **Масштабирование**: При приближении головы к экрану увеличивается процент отображаемой области фонового изображения. Преобразование основано на расчёте углового размера экрана по формуле: α = 2 × arctan(W / (2 × L))

3. **Панорамирование**: При движении головы влево/вправо/вверх/вниз происходит сдвиг "окна" просмотра по фоновому изображению, создавая эффект виртуального окна

## Технологии

- **JavaScript (ES6+)** - основной язык разработки
- **MediaPipe** - компьютерное зрение для отслеживания головы
- **Canvas API** - рендеринг изображения
- **WebRTC API** - доступ к веб-камере
- **Three.js** - планируется для системы частиц (будущее)

## Требования

- Современный браузер с поддержкой WebRTC (Chrome 90+, Firefox 88+, Edge 90+)
- Веб-камера
- Хорошее освещение для стабильного отслеживания лица
- Достаточно мощное устройство для обработки видео в реальном времени (~30 FPS)

## Установка и запуск

### Предварительные требования
- Node.js и npm (или yarn)
- Локальный веб-сервер (для работы с камерой требуется HTTP/HTTPS)

### Шаги установки

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd pano
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите локальный сервер:
```bash
npm start
```

4. Откройте браузер и перейдите по адресу:
```
http://localhost:3002
```

5. Разрешите доступ к веб-камере при запросе браузера

## Использование

1. При первом запуске приложение запросит доступ к вашей веб-камере - разрешите доступ
2. Убедитесь, что ваше лицо хорошо видно в камере и достаточно освещено
3. Нажмите кнопку "Старт" для начала отслеживания
4. Медленно приближайтесь и удаляйтесь от экрана - изображение будет масштабироваться
5. Двигайте головой влево/вправо/вверх/вниз - viewport будет панорамироваться по изображению

## Структура проекта

```
pano/
├── src/                    # Исходный код
│   ├── camera/            # Управление камерой
│   ├── mediapipe/         # Интеграция MediaPipe
│   ├── tracking/          # Логика отслеживания
│   ├── viewport/          # Управление viewport
│   ├── renderer/          # Рендеринг изображения
│   ├── ui/                # UI компоненты
│   └── utils/             # Утилиты
├── assets/                # Ресурсы
│   └── images/           # Фоновые изображения
├── styles/                # Стили
└── index.html            # Главная страница
```

## Разработка

### Стиль кода
- ESLint с конфигурацией Airbnb
- 2 пробела для отступов
- JSDoc комментарии для всех функций
- См. [RULES.md](RULES.md) для подробностей

### Версионирование
Проект использует SemVer. Версия и билд отображаются в статус-баре приложения.

## Документация

- [PROJECT.md](PROJECT.md) - подробное описание проекта и архитектуры
- [REQUIREMENTS.md](REQUIREMENTS.md) - функциональные и нефункциональные требования
- [RULES.md](RULES.md) - правила разработки и стиль кода

## Известные ограничения

- Работает только в браузерах с поддержкой WebRTC
- Требуется хорошее освещение для стабильного отслеживания
- Точность зависит от качества камеры
- Не работает при отсутствии лица в кадре
- Для production требуется HTTPS (для доступа к камере)

## Планы на будущее

- [ ] Интеграция Three.js для системы частиц (снежинки)
- [ ] Загрузка пользовательских фоновых изображений
- [ ] Настройка параметров чувствительности
- [ ] Калибровка под разные размеры экранов
- [ ] Режим отладки с метриками производительности
- [ ] Поддержка 2-3 одновременно подключённых мониторов - потребуется первоначальная настройка их размеров и взаимного расположения

## Лицензия

MIT License - см. [LICENSE](LICENSE) файл для деталей.

## Авторы

Александр Зибин
